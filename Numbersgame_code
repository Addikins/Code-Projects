using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
namespace Numbers_Game
{
    class Program
    {
        static void Main(string[] args)
        {
            bool playAgain = true;
            bool correctAnswer = true;
            bool lowRangeSuccess = true;
            bool highRangeSuccess = true;
            bool rangeAquire = false;
            int high;
            int low;
            do
            {
                Console.WriteLine("Let's play a game! I want you to guess a number for me.");
                Console.WriteLine("First off, give me a low number:");
                do {
                    string lowInput = Console.ReadLine();
                    lowRangeSuccess = int.TryParse(lowInput, out low);
                    if (!int.TryParse(lowInput, out low))
                    {
                        Console.WriteLine("Please input a low number:");
                        Console.WriteLine();
                    }
                    else
                    {
                        Console.WriteLine("Thanks!");
                        Console.WriteLine();
                        rangeAquire = true;
                    }
                } while (rangeAquire == false);
                Console.WriteLine("Now, please give me a high number:");
                Console.WriteLine();
                do
                {
                    string highInput = Console.ReadLine();
                    highRangeSuccess = int.TryParse(highInput, out high);
                    if (!int.TryParse(highInput, out high) || low >= high)
                    {
                        Console.WriteLine("Please input a high number:");
                        rangeAquire = false;
                    }
                    else
                    {
                        Console.WriteLine("Thank you again!");
                        Console.WriteLine();
                        rangeAquire = true;
                    }
                } while (rangeAquire == false);
                Random random = new Random();
                int returnedValue = random.Next(low, high);
                int Guess;
                int g = 0;
                string guessstring;
                Console.WriteLine("I'm thinking of a number between "+low+" and "+high+", guess it for a cookie!");
                do
                {
                    guessstring = (Console.ReadLine());
                    bool success = int.TryParse(guessstring, out Guess);
                    g++;
                    if (!success)
                    {
                        g--;
                        Console.WriteLine("Incorrect input, guess a number between 1 and 100, ya dork.");
                        Console.WriteLine();
                    }
                    else if (Guess < returnedValue)
                    {
                        Console.WriteLine();
                        Console.WriteLine("Higher than " + Guess);
                        Console.WriteLine("You've made " + g + " guesses! Guess again!");
                        Console.WriteLine();
                    }
                    else if (Guess > returnedValue)
                    {
                        Console.WriteLine();
                        Console.WriteLine("Lower than " + Guess);
                        Console.WriteLine( "You've made " + g + " guesses! Guess again!");
                        Console.WriteLine();
                    }
                } while (Guess != returnedValue);
                if (Guess == returnedValue)
                {
                    Console.WriteLine();
                    Console.WriteLine("Good fucking job, you guessed " + returnedValue + " and after " + g + " guesses, you were correct!");
                    Console.WriteLine("Have a cookie <3");
                    Console.WriteLine();
                    do
                    {
                        Console.WriteLine("Would you like to play again?");
                        Console.WriteLine();
                        String playAgainanswer = Console.ReadLine();
                        if (string.Equals(playAgainanswer, "yes", StringComparison.CurrentCultureIgnoreCase) || string.Equals(playAgainanswer, "y", StringComparison.CurrentCultureIgnoreCase))
                        {
                            playAgain = true;
                            correctAnswer = true;
                            Console.WriteLine();
                            Console.WriteLine("Great, let's do this!");
                            Console.WriteLine();
                        }
                        else if (string.Equals(playAgainanswer, "no", StringComparison.CurrentCultureIgnoreCase) || string.Equals(playAgainanswer, "n", StringComparison.CurrentCultureIgnoreCase))
                        {
                            playAgain = false;
                            correctAnswer = true;
                            Console.WriteLine();
                            Console.WriteLine("Thanks for playing!");
                        }
                        else
                        {
                            correctAnswer = false;
                            Console.WriteLine("I don't understand, please tell me yes or no.");
                        }
                    } while (correctAnswer != true);
                }
            } while (playAgain == true);    
        }
    }
}
